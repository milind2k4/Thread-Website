<!DOCTYPE html>
<html>
  <head>
    <title>Thread Finder</title>
    <link rel="icon" type="image/svg+xml" href="assets/img/thread_favicon.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles/main.css" />
    <script type="module" src="./js/app.js"></script>
  </head>
  <body>
    <header>
      <h1>Reddit Thread Finder</h1>
    </header>
    <main>
      <section class="search-container">
        <h2>Find Episode</h2>
        <form id="searchForm" novalidate>
          <div class="form-row">
            <div class="form-group" id="title">
              <label for="englishTitle">English Title</label>
              <input
                type="text"
                id="englishTitle"
                minlength="3"
                autocomplete="off"
                autocapitalize="words"
                autocorrect="off"
                required
                placeholder="e.g. Monogatari 2nd Season"
              />
            </div>

            <br />

            <div class="form-group" id="episode">
              <label for="episodeNo">Episode</label>
              <input
                type="text"
                id="episodeNo"
                inputmode="numeric"
                pattern="[0-9]*"
                maxlength="4"
                required
                placeholder="e.g. ep 5"
              />
            </div>
          </div>

          <div class="form-actions">
            <div class="history-container" id="historyContainer">
              <button type="button" id="historyButton" class="history-button">History</button>
              <div class="history-dropdown">
                <div class="history-header">
                  <h4>Recent Searches</h4>
                  <button type="button" id="clearHistory" class="clear-history">Clear</button>
                </div>
                <div class="history-items" id="historyItems"></div>
              </div>
              <button type="submit" class="search-button">Search</button>
            </div>
          </div>
        </form>

        <div class="error-container" id="errorContainer"></div>
      </section>

      <section id="results" class="results-container">
        <h2>Discussion Thread</h2>

        <div id="loadingState" class="loading-state" style="display: none">
          <div class="spinner"></div>
          <p class="loading-text">Searching Reddit...</p>
        </div>

        <div class="empty-state" style="display: flex">
          <img
            src="assets\img\empty_icon.svg"
            alt="No discussions"
            class="empty-icon"
          />
          <h3>Nothing to show yet</h3>
          <p>Search for an anime episode to see discussions</p>
        </div>


        <div id="discussionResults" class="discussion-results">
          <!--comments-->
        </div>
      </section>
    </main>

    <footer>
      <p>&copy; <span id="currentYear"></span> Thread Finder</p>
    </footer>

    <script>
      document.getElementById("currentYear").textContent =
        new Date().getFullYear();
    </script>
  </body>
</html>
